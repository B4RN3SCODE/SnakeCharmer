/*
 * Plugin for Snake Charmer for Big Commerce
 * @author		Tyler J Barnes
 * @contact		b4rn3scode@gmail.com
 */
"use strict";var SCBCMain=function(){this._version="1.1.1",this._pluginName="SCBCMain",this._pluginId="SC315501",this._storeHash="",this._cart=void 0,this._cartId="SCBCCart",this._cartItemName="SCBCCartItem",this._products=[],this._eventCriteria=[],this._dataAttributes={productId:"prodid",cartCount:"prodqty"},this._hasCartProducts=!1,this._hasViewedProducts=!1,this.load=function(t){return window.SC&&"undefined"!=typeof window.SC?(this.getCriteria(),this.getCart(),this._cart&&"undefined"!=typeof this._cart&&this._cart.length>0&&this.getCartProducts(),console.log("cart",this._cart),console.log("criteria",this._eventCriteria),console.log("products",this._products),void $(document).trigger(t)):void console.error("SCBCMain : Cannot find SC... idk how this is even running then.~!?!~.")},this.getCart=function(){var t=$("#"+this._cartId);return t.length<1?void console.error("SCBCMain : cannot find cart"):void(this._cart=t)},this.addProduct=function(t,i,r){!t||"undefined"==typeof t||1>t||(i=i&&i>0?i:0,r=r===!0,this.hasProduct(t)?this.updateProduct(t,{cartCount:i,viewed:r}):this._products.push({id:t,cartCount:i,viewed:r}))},this.hasProduct=function(t){if(!t||"undefined"==typeof t||1>t)return!1;for(var i=0;i<this._products.length;i++)if(this._products[i].id==t)return!0;return!1},this.updateProduct=function(t,i){if(t&&"undefined"!=typeof t&&!(1>t)){var r=!1;for(var e in i){r=!0;break}if(r){this.hasProduct(t)||this.addProduct(t,0,!1);for(var n=0;n<this._products.length;n++)if(this._products[n].id==t){for(var o in i)o in this._products[n]&&(this._products[n][o]=i[o]);break}}}},this.getCriteria=function(){return"undefined"==typeof window.SC.getEventCriteria?void console.error("SCBCMain : Cannot get criteria cuz SC function doesnt exist.... this msg if for testing but im leaving it in anyway"):void(this._eventCriteria=window.SC.getEventCriteria())},this.getCartProducts=function(){var t=this._cart.find("*[data-name="+this._cartItemName+"]");if(t.length>0){this._hasCartProducts=!0;for(var i=0;i<t.length;i++)this.addProduct(parseInt($(t[i]).data(this._dataAttributes.productId)),parseInt($(t[i]).data(this._dataAttributes.cartCount)))}},this.productViewed=function(t){return!t||"undefined"==typeof t||isNaN(parseInt(t))?void console.log("SCBCMain : cannot mark product as viewed ["+t+"]"):(this.addProduct(t,0,!0),void(this._hasViewedProducts=!0))}};window.SC.addPlugin(new SCBCMain);
